---
title: "TCP和UDP的区别"
date: 2019-11-27
permalink: "2019-11-27-tcpandudp-difference"
---

Udp 接收到应用协议的某个消息（已编码为二进制）后，不会分包，但是要记录当前数据包的大小（消息大小加上 8 个字节头部），然后交给 IP 层。而 TCP 接收到应用层协议的消息（已编码为二进制）后，然后参考该计算机连接的网络数据链路层 MTU（最大传输单元）确定是否要分包，然后交给 IP 层。

UDP 是非面向连接的，即发送数据之前不需要建立连接，而 TCP 则是面向连接的，也就是说，通过 TCP 连接传送的数据，无差错，不丢失，不重复，且按序到达。也就是说 UDP 管发不管到，而 TCP 管发管到。因此，在安全性方面来说，TCP 更具有优越性。

| 区别点   | TCP                                       | UDP                            |
| -------- | ----------------------------------------- | ------------------------------ |
| 连接性   | 面向连接                                  | 无连接                         |
| 可靠性   | 可靠                                      | 不可靠                         |
| 状态	   | 有状态(三次握手)						   | 无状态							|
| 有序性   | 有序                                      | 无序                           |
| 面向     | 字节流                                    | 报文（保留报文的边界）         |
| 有界性   | 有界                                      | 无界                           |
| 流量控制 | 有（滑动窗口）                            | 无                             |
| 拥塞控制 | 有（慢开始、拥塞避免、快重传、快恢复）    | 无                             |
| 传输速度 | 慢                                        | 快                             |
| 流量级   | 重量级                                    | 轻量级                         |
| 发广播   | 不支持                                    | 支持                           |
| 双工性   | 全双工                                    | 一对一、一对多、多对一、多对多 |
| 头部     | 大（20-60 字节）                          | 小（8 字节）                   |
| 应用     | QQ 文件传输、邮件传输、浏览器等、视频网站 | 即时通讯、视频通话等           |

**Udp 适用场合**：如果需要做实时性很高且消息小（比如小于以太网的 MTU1500Byte）的通信程序，UDP 就很适合。关键消息重复发，不用等确认都可以，当然最终还是需要确认。如果是内网环境，网络非常稳定，UDP 几乎不会出问题，如果极度要求性能，可以考虑。如果你公网网络资源有限，而用户之间需要传递大量数据，可以考虑用 UDP 做 NAT 穿透。
